<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Studio Global PRO</title>
    <style>
        :root { --primary: #6c5ce7; --glass: rgba(255, 255, 255, 0.92); }
        
        /* –¢–ï–ú–´ */
        body.chameleon {
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: move 15s ease infinite;
        }
        body.pastel { background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%); }
        @keyframes move { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

        body { font-family: 'Segoe UI', sans-serif; margin: 0; min-height: 100vh; display: flex; justify-content: center; align-items: center; transition: 0.5s; overflow-x: hidden; }
        .container { display: grid; grid-template-columns: 380px 520px; gap: 20px; width: 95%; max-width: 1000px; position: relative; }
        .panel { background: var(--glass); backdrop-filter: blur(15px); padding: 25px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.4); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        
        .header { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid var(--primary); }
        .logo { width: 60px; height: 60px; border-radius: 50%; border: 2px solid var(--primary); object-fit: contain; background: white; }

        label { display: block; font-size: 0.7rem; font-weight: bold; margin: 12px 0 5px; text-transform: uppercase; color: #444; }
        select, input, textarea { width: 100%; padding: 10px; border-radius: 10px; border: 1px solid #ddd; font-size: 0.9rem; background: #fff; }

        .btn { width: 100%; padding: 12px; border: none; border-radius: 12px; background: var(--primary); color: white; cursor: pointer; font-weight: bold; margin-top: 10px; display: flex; align-items: center; justify-content: center; gap: 8px; transition: 0.2s; }
        .btn:hover { filter: brightness(1.1); transform: scale(1.02); }

        .cover-art { width: 100%; height: 260px; border-radius: 20px; background: #eee center/cover no-repeat; border: 5px solid #fff; box-shadow: 0 10px 20px rgba(0,0,0,0.1); margin-bottom: 15px; }

        .controls { display: flex; justify-content: center; gap: 15px; margin: 15px 0; }
        .c-btn { width: 55px; height: 55px; border-radius: 15px; border: none; background: var(--primary); color: white; font-size: 1.2rem; cursor: pointer; }
        .c-btn:disabled { background: #ccc; opacity: 0.5; cursor: not-allowed; }

        #timer-box { font-size: 1.8rem; font-weight: bold; color: #e74c3c; text-align: center; margin-bottom: 10px; display: none; }
        #lock-screen { position: absolute; inset: 0; background: rgba(0,0,0,0.95); z-index: 1000; border-radius: 30px; display: none; flex-direction: column; justify-content: center; align-items: center; color: white; text-align: center; padding: 20px; }
    </style>
</head>
<body class="chameleon">

<div id="lock-screen">
    <h1 id="lock-msg">Time is up</h1>
    <button id="btn-restart" class="btn" onclick="location.reload()" style="width:180px">Restart</button>
</div>

<div class="container">
    <div class="panel">
        <div class="header">
            <img src="7929d202-ccf0-4e08-8785-785e9179ebd0_removalai_preview.png" class="logo" alt="Logo" onerror="this.src='https://via.placeholder.com/60?text=LOGO'">
            <h3 style="margin:0">Audio Studio PRO</h3>
        </div>

        <label id="lbl-theme">üé® –¢–µ–º–∞ —Ñ–æ–Ω–∞</label>
        <select id="themeSet">
            <option value="chameleon">Chameleon</option>
            <option value="pastel">Pastel</option>
        </select>

        <label id="lbl-lang">üåê –Ø–∑—ã–∫ –∏–∑—É—á–µ–Ω–∏—è</label>
        <select id="langSet">
            <option value="ru" data-img="russia">–†—É—Å—Å–∫–∏–π</option>
            <option value="en" data-img="london">English</option>
            <option value="de" data-img="germany">Deutsch</option>
            <option value="fr" data-img="paris">Fran√ßais</option>
            <option value="es" data-img="spain">Espa√±ol</option>
            <option value="it" data-img="italy">Italiano</option>
            <option value="zh" data-img="china">‰∏≠Êñá (Chinese)</option>
            <option value="ja" data-img="tokyo">Êó•Êú¨Ë™û (Japanese)</option>
            <option value="ko" data-img="seoul">ÌïúÍµ≠Ïñ¥ (Korean)</option>
            <option value="tr" data-img="istanbul">T√ºrk√ße</option>
            <option value="ar" data-img="dubai">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
            <option value="pt" data-img="lisbon">Portugu√™s</option>
            <option value="nl" data-img="amsterdam">Nederlands</option>
            <option value="pl" data-img="warsaw">Polski</option>
            <option value="sv" data-img="stockholm">Svenska</option>
            <option value="el" data-img="athens">ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨</option>
            <option value="he" data-img="israel">◊¢◊ë◊®◊ô◊™</option>
            <option value="hi" data-img="delhi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
            <option value="vi" data-img="vietnam">Ti·∫øng Vi·ªát</option>
            <option value="cs" data-img="prague">ƒåe≈°tina</option>
        </select>

        <label id="lbl-mode">üéì –†–µ–∂–∏–º</label>
        <select id="modeSet">
            <option value="master">Master (Teacher)</option>
            <option value="study">Study (Student)</option>
            <option value="test">Test (Exam)</option>
        </select>

        <div id="extra-btns" style="margin-top:15px">
            <button class="btn" id="slowBtn" style="background:#00b894; display:none">üê¢ Slow 0.8x</button>
            <button class="btn" id="loopBtn" style="background:#0984e3; display:none">üîÑ Loop: Off</button>
        </div>

        <label id="lbl-code" style="margin-top:20px">üì¶ –ö–æ–¥ Iframe</label>
        <textarea id="ifOut" readonly style="height:45px; font-size:0.7rem"></textarea>
        <button class="btn" id="copyBtn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
    </div>

    <div class="panel">
        <div id="cur-mode-tag" style="font-weight:bold; color:var(--primary); font-size:0.7rem; margin-bottom:5px">MASTER MODE</div>
        <div class="cover-art" id="cover"></div>
        <div id="timer-box">02:00</div>
        
        <input type="range" id="prog" value="0" step="0.1" style="width:100%">
        <div style="text-align:center; font-family:monospace; margin-top:5px" id="time-txt">00:00 / 00:00</div>

        <div class="controls">
            <button class="c-btn" id="rew">‚è™</button>
            <button class="c-btn" id="play" style="width:70px; height:70px; border-radius:50%">‚ñ∂</button>
            <button class="c-btn" id="fwd">‚è©</button>
        </div>

        <label id="lbl-audio">üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∞—É–¥–∏–æ</label>
        <input type="file" id="audIn" accept="audio/*">
        <label id="lbl-cover">üñºÔ∏è –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–±–ª–æ–∂–∫—É</label>
        <input type="file" id="imgIn" accept="image/*">
    </div>
</div>

<script>
    const audio = new Audio();
    let playCount = 0, timer;

    const dict = {
        ru: { theme: "üé® –¢–µ–º–∞ —Ñ–æ–Ω–∞", lang: "üåê –Ø–∑—ã–∫ –∏–∑—É—á–µ–Ω–∏—è", mode: "üéì –†–µ–∂–∏–º", code: "üì¶ –ö–æ–¥ Iframe", audio: "üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∞—É–¥–∏–æ", cover: "üñºÔ∏è –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–±–ª–æ–∂–∫—É", copy: "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥", lock: "–í—Ä–µ–º—è –≤—ã—à–ª–æ", restart: "–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å", slow: "üê¢ –ó–∞–º–µ–¥–ª–∏—Ç—å 0.8x", loop: "üîÑ –ü–æ–≤—Ç–æ—Ä", master: "–£—á–∏—Ç–µ–ª—å (Master)", study: "–£—á–µ–Ω–∏–∫ (Study)", test: "–≠–∫–∑–∞–º–µ–Ω (Test)" },
        en: { theme: "üé® Background Theme", lang: "üåê Learning Language", mode: "üéì Mode", code: "üì¶ Iframe Code", audio: "üìÅ Upload Audio", cover: "üñºÔ∏è Upload Cover", copy: "Copy Code", lock: "Time is up", restart: "Restart", slow: "üê¢ Slow 0.8x", loop: "üîÑ Loop", master: "Master (Teacher)", study: "Study (Student)", test: "Test (Exam)" },
        de: { theme: "üé® Hintergrundthema", lang: "üåê Lernsprache", mode: "üéì Modus", code: "üì¶ Iframe-Code", audio: "üìÅ Audio hochladen", cover: "üñºÔ∏è Cover hochladen", copy: "Code kopieren", lock: "Zeit ist um", restart: "Neustart", slow: "üê¢ Langsam 0.8x", loop: "üîÑ Wiederholung", master: "Lehrer", study: "Sch√ºler", test: "Pr√ºfung" },
        fr: { theme: "üé® Th√®me de fond", lang: "üåê Langue", mode: "üéì Mode", code: "üì¶ Code Iframe", audio: "üìÅ Charger l'audio", cover: "üñºÔ∏è Charger la couverture", copy: "Copier le code", lock: "Temps √©coul√©", restart: "Red√©marrer", slow: "üê¢ Ralenti 0.8x", loop: "üîÑ Boucle", master: "Ma√Ætre", study: "√âtude", test: "Test" },
        es: { theme: "üé® Tema de fondo", lang: "üåê Idioma", mode: "üéì Modo", code: "üì¶ C√≥digo Iframe", audio: "üìÅ Cargar audio", cover: "üñºÔ∏è Cargar portada", copy: "Copiar c√≥digo", lock: "Tiempo agotado", restart: "Reiniciar", slow: "üê¢ Lento 0.8x", loop: "üîÑ Bucle", master: "Maestro", study: "Estudio", test: "Examen" },
        zh: { theme: "üé® ËÉåÊôØ‰∏ªÈ¢ò", lang: "üåê Â≠¶‰π†ËØ≠Ë®Ä", mode: "üéì Ê®°Âºè", code: "üì¶ ÂµåÂÖ•‰ª£Á†Å", audio: "üìÅ ‰∏ä‰º†Èü≥È¢ë", cover: "üñºÔ∏è ‰∏ä‰º†Â∞ÅÈù¢", copy: "Â§çÂà∂‰ª£Á†Å", lock: "Êó∂Èó¥Âà∞", restart: "ÈáçÊñ∞ÂêØÂä®", slow: "üê¢ ÂáèÈÄü 0.8x", loop: "üîÑ Âæ™ÁéØ", master: "ÊïôÂ∏àÊ®°Âºè", study: "Â≠¶‰π†Ê®°Âºè", test: "ËÄÉËØïÊ®°Âºè" }
        // ... –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –≤—Å–µ—Ö 20 —è–∑—ã–∫–æ–≤
    };

    function translateUI() {
        const l = document.getElementById('langSet').value;
        const d = dict[l] || dict['en'];
        document.getElementById('lbl-theme').innerText = d.theme;
        document.getElementById('lbl-lang').innerText = d.lang;
        document.getElementById('lbl-mode').innerText = d.mode;
        document.getElementById('lbl-code').innerText = d.code;
        document.getElementById('lbl-audio').innerText = d.audio;
        document.getElementById('lbl-cover').innerText = d.cover;
        document.getElementById('copyBtn').innerText = d.copy;
        document.getElementById('lock-msg').innerText = d.lock;
        document.getElementById('btn-restart').innerText = d.restart;
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π —Ä–µ–∂–∏–º–æ–≤ –≤ —Å–µ–ª–µ–∫—Ç–æ—Ä–µ
        const m = document.getElementById('modeSet');
        m.options[0].text = d.master;
        m.options[1].text = d.study;
        m.options[2].text = d.test;

        // –ê–≤—Ç–æ-–æ–±–ª–æ–∂–∫–∞
        const kw = document.getElementById('langSet').selectedOptions[0].dataset.img;
        document.getElementById('cover').style.backgroundImage = `url('https://source.unsplash.com/featured/?${kw},city')`;
    }

    document.getElementById('langSet').onchange = translateUI;
    document.getElementById('themeSet').onchange = (e) => document.body.className = e.target.value;

    document.getElementById('modeSet').onchange = () => {
        const m = document.getElementById('modeSet').value;
        const l = document.getElementById('langSet').value;
        const d = dict[l] || dict['en'];
        
        document.getElementById('cur-mode-tag').innerText = m.toUpperCase() + " MODE";
        document.getElementById('slowBtn').style.display = (m==='study')?'flex':'none';
        document.getElementById('loopBtn').style.display = (m==='master')?'flex':'none';
        document.getElementById('timer-box').style.display = (m==='test')?'block':'none';
        
        playCount = 0; audio.playbackRate = 1; clearInterval(timer);
        document.getElementById('prog').disabled = false;
        document.getElementById('rew').disabled = false;
        document.getElementById('fwd').disabled = false;
        document.getElementById('timer-box').innerText = "02:00";
    };

    document.getElementById('play').onclick = () => {
        if(!audio.src) return;
        if(audio.paused) {
            const m = document.getElementById('modeSet').value;
            if(m==='test') { 
                document.getElementById('prog').disabled=true; 
                document.getElementById('rew').disabled=true; 
                document.getElementById('fwd').disabled=true; 
                startExam(); 
            }
            if(m==='study') { 
                playCount++; 
                if(playCount>=3) { 
                    document.getElementById('prog').disabled=true; 
                    document.getElementById('rew').disabled=true; 
                    document.getElementById('fwd').disabled=true; 
                } 
            }
            audio.play(); document.getElementById('play').innerText = '‚è∏';
        } else { audio.pause(); document.getElementById('play').innerText = '‚ñ∂'; }
    };

    function startExam() {
        let t = 120;
        timer = setInterval(() => {
            t--; let min=Math.floor(t/60), sec=t%60;
            document.getElementById('timer-box').innerText = `${min}:${sec<10?'0'+sec:sec}`;
            if(t<=0) { audio.pause(); document.getElementById('lock-screen').style.display='flex'; clearInterval(timer); }
        }, 1000);
    }

    document.getElementById('slowBtn').onclick = () => {
        audio.playbackRate = (audio.playbackRate===1)?0.8:1;
        document.getElementById('slowBtn').style.background = (audio.playbackRate===0.8)?"#e67e22":"#00b894";
    };

    document.getElementById('loopBtn').onclick = () => { 
        audio.loop = !audio.loop; 
        document.getElementById('loopBtn').innerText = audio.loop ? "üîÑ Loop: ON" : "üîÑ Loop: OFF"; 
    };

    document.getElementById('audIn').onchange = (e) => { if(e.target.files[0]) audio.src = URL.createObjectURL(e.target.files[0]); };
    document.getElementById('imgIn').onchange = (e) => { if(e.target.files[0]) document.getElementById('cover').style.backgroundImage = `url(${URL.createObjectURL(e.target.files[0])})`; };
    
    audio.ontimeupdate = () => {
        const p = document.getElementById('prog'); p.max = audio.duration || 0; p.value = audio.currentTime;
        const f = s => new Date(s * 1000).toISOString().substr(14, 5);
        document.getElementById('time-txt').innerText = `${f(audio.currentTime)} / ${f(audio.duration || 0)}`;
    };

    document.getElementById('prog').oninput = (e) => audio.currentTime = e.target.value;
    document.getElementById('rew').onclick = () => audio.currentTime -= 10;
    document.getElementById('fwd').onclick = () => audio.currentTime += 10;
    
    document.getElementById('copyBtn').onclick = () => {
        const c = `<iframe src="${window.location.href}" width="100%" height="750px" frameborder="0" allow="autoplay"></iframe>`;
        document.getElementById('ifOut').value = c; navigator.clipboard.writeText(c); alert("Copied to clipboard!");
    };

    translateUI();
</script>
</body>
</html>
