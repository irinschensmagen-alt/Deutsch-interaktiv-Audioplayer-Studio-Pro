<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Studio Pro - Chameleon Edition</title>
    <style>
        :root { 
            --gold: linear-gradient(135deg, #d4af37, #f1c40f, #c5a028);
            --gold-text: #b8860b;
            --danger: #e74c3c;
            --success: #27ae60;
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç –•–∞–º–µ–ª–µ–æ–Ω–∞ */
        @keyframes chameleon {
            0% { background-color: #f3e5f5; }
            25% { background-color: #e3f2fd; }
            50% { background-color: #e8f5e9; }
            75% { background-color: #fff3e0; }
            100% { background-color: #f3e5f5; }
        }

        body { 
            font-family: 'Segoe UI', sans-serif; 
            margin: 0; 
            animation: chameleon 15s infinite alternate;
            color: #444; 
            display: flex; 
            height: 100vh; 
            overflow: hidden; 
        }

        .container { display: grid; grid-template-columns: 320px 1fr 350px; width: 100%; transition: all 0.3s; }
        /* –ü—Ä—è—á–µ–º —Å–ª–æ–≤–∞—Ä—å –≤ —Ä–µ–∂–∏–º–µ —Ç–µ—Å—Ç–∞ */
        .container.test-mode { grid-template-columns: 320px 1fr 0px; }

        .settings { background: rgba(255, 255, 255, 0.9); padding: 25px; border-right: 1px solid rgba(0,0,0,0.05); overflow-y: auto; backdrop-filter: blur(10px); }
        
        .player-view { padding: 20px; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; overflow-y: auto; }
        
        .dictionary-view { 
            background: rgba(255, 255, 255, 0.8); 
            border-left: 1px solid rgba(0,0,0,0.05); 
            display: flex; 
            flex-direction: column; 
            transition: 0.3s;
            overflow: hidden;
        }

        .header { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; }
        .logo-img { width: 50px; height: 50px; border-radius: 50%; object-fit: cover; border: 2px solid #d4af37; }

        .cover { 
            width: 100%; max-width: 450px; height: 240px; border-radius: 20px; 
            background: white center/cover no-repeat; border: 5px solid white; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); display: flex; align-items: center; justify-content: center; 
            margin-bottom: 15px; 
        }
        .cover:not(.has-img)::after { content: "üéµ"; font-size: 50px; opacity: 0.1; }

        label { display: block; font-size: 0.7rem; font-weight: 800; margin-top: 12px; color: var(--gold-text); text-transform: uppercase; }
        select, input, textarea { width: 100%; padding: 10px; border-radius: 10px; border: 1px solid #ddd; margin-top: 5px; font-size: 0.85rem; background: white; }

        .btn { width: 100%; padding: 12px; border: none; border-radius: 12px; background: var(--gold); color: white; font-weight: 700; cursor: pointer; margin-top: 10px; }
        .btn-del { background: rgba(0,0,0,0.05); color: #666; padding: 4px 8px; font-size: 0.65rem; border-radius: 6px; cursor: pointer; border: none; margin-top: 5px; }

        .controls { display: flex; gap: 15px; align-items: center; margin: 15px 0; }
        .c-btn { width: 45px; height: 45px; border-radius: 12px; border: none; background: white; color: #d4af37; font-size: 1.2rem; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        #play-btn { width: 65px; height: 65px; border-radius: 50%; background: var(--gold); color: white; }

        #prog { width: 100%; max-width: 500px; accent-color: #d4af37; cursor: pointer; }
        #time-txt { font-family: monospace; font-weight: bold; color: var(--gold-text); margin-top: 5px; }
        #status-display { color: var(--danger); font-weight: 900; margin-bottom: 10px; font-size: 1.2rem; }

        .card { background: white; padding: 15px; border-radius: 15px; margin-top: 10px; width: 100%; max-width: 500px; box-shadow: 0 2px 10px rgba(0,0,0,0.02); }
        
        iframe#dict-frame { width: 100%; height: 100%; border: none; background: white; }
        .dict-placeholder { padding: 20px; text-align: center; color: #999; font-style: italic; }

        #lock-screen { position: absolute; inset: 0; background: rgba(255,255,255,0.98); z-index: 5000; display: none; flex-direction: column; align-items: center; justify-content: center; }
    </style>
</head>
<body>

<div id="lock-screen">
    <h1 style="color:var(--danger); font-size: 3rem;" id="lock-title">Time is up</h1>
    <button class="btn" style="width:200px" onclick="location.reload()">Restart</button>
</div>

<div class="container" id="main-container">
    <div class="settings">
        <div class="header">
            <img id="main-logo" src="https://irinschensmagen-alt.github.io/Audioplayer-Studio-Pro/logo.png" class="logo-img" alt="Logo">
            <h3 id="ui-title">Studio</h3>
        </div>

        <label id="lbl-lang">Language</label>
        <select id="langSelect">
            <option value="de" selected>Deutsch</option>
            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            <option value="en">English</option>
            <option value="zh">‰∏≠Êñá</option>
            <option value="es">Espa√±ol</option>
            <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
            <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
            <option value="fa">ŸÅÿßÿ±ÿ≥€å</option>
            <option value="pt">Portugu√™s</option>
            <option value="ja">Êó•Êú¨Ë™û</option>
            <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</option>
            <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
            <option value="fr">Fran√ßais</option>
            <option value="th">‡πÑ‡∏ó‡∏¢</option>
            <option value="tr">T√ºrk√ße</option>
            <option value="ko">ÌïúÍµ≠Ïñ¥</option>
            <option value="el">ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨</option>
            <option value="da">ÿØÿ±€å</option>
        </select>

        <label id="lbl-mode">Mode</label>
        <select id="modeSelect">
            <option value="master">Master (Loop)</option>
            <option value="study" selected>Study</option>
            <option value="test">Test (Exam)</option>
        </select>

        <button class="btn" id="slowBtn" style="background: var(--success);">üê¢ SLOW 0.8x</button>
        <button class="btn" id="loopBtn" style="background:#2980b9; display:none">üîÑ Loop: Off</button>

        <label id="lbl-dict-input">Dictionary Link</label>
        <input type="text" id="dictUrl" placeholder="https://reverso.net ...">

        <label id="lbl-code" style="margin-top:20px">Embed Code</label>
        <textarea id="code-out" rows="2" readonly></textarea>
        <button class="btn" id="copy-btn">Copy Code</button>
    </div>

    <div class="player-view">
        <div id="status-display"></div>
        <div class="cover" id="cover-div"></div>
        <input type="range" id="prog" value="0" step="0.1">
        <div id="time-txt">00:00 / 00:00</div>
        
        <div class="controls">
            <button class="c-btn" id="rew-btn">‚è™</button>
            <button class="c-btn" id="play-btn">‚ñ∂</button>
            <button class="c-btn" id="fwd-btn">‚è©</button>
        </div>

        <div class="card">
            <label id="lbl-aud">Audio</label>
            <input type="text" id="audUrl" placeholder="URL...">
            <input type="file" id="audFile" accept="audio/*">
            <button class="btn-del" onclick="clearRes('aud')">‚úñ Remove</button>
        </div>
        <div class="card">
            <label id="lbl-img">Cover</label>
            <input type="text" id="imgUrl" placeholder="URL...">
            <input type="file" id="imgFile" accept="image/*">
            <button class="btn-del" onclick="clearRes('img')">‚úñ Remove</button>
        </div>
    </div>

    <div class="dictionary-view" id="dict-panel">
        <div style="padding: 10px; background: var(--gold); color: white; font-weight: bold; text-align: center;" id="dict-title">Dictionary</div>
        <iframe id="dict-frame" src=""></iframe>
        <div id="dict-hint" class="dict-placeholder">Enter a dictionary URL on the left to use it here.</div>
    </div>
</div>

<script>
    const audio = new Audio();
    let plays = 0;

    const langMap = {
        de: { title: "Audio Studio", lang: "Sprache", mode: "Modus", code: "Code", copy: "Kopieren", aud: "Audio", img: "Cover", slow: "üê¢ SLOW 0.8x", lock: "Zeit um", attempt: "Versuch", dict: "W√∂rterbuch", dictInp: "W√∂rterbuch Link", modes: ["Master", "Study", "Test"] },
        ru: { title: "–°—Ç—É–¥–∏—è", lang: "–Ø–∑—ã–∫", mode: "–†–µ–∂–∏–º", code: "–ö–æ–¥", copy: "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å", aud: "–ê—É–¥–∏–æ", img: "–û–±–ª–æ–∂–∫–∞", slow: "üê¢ –ó–ê–ú–ï–î–õ–ï–ù–ò–ï 0.8x", lock: "–í—Ä–µ–º—è –≤—ã—à–ª–æ", attempt: "–ü–æ–ø—ã—Ç–∫–∞", dict: "–°–ª–æ–≤–∞—Ä—å", dictInp: "–°—Å—ã–ª–∫–∞ –Ω–∞ —Å–ª–æ–≤–∞—Ä—å", modes: ["–ú–∞—Å—Ç–µ—Ä", "–£—á–µ–Ω–∏–∫", "–¢–µ—Å—Ç"] },
        en: { title: "Studio", lang: "Language", mode: "Mode", code: "Code", copy: "Copy", aud: "Audio", img: "Cover", slow: "üê¢ SLOW 0.8x", lock: "Time is up", attempt: "Attempt", dict: "Dictionary", dictInp: "Dictionary Link", modes: ["Master", "Study", "Test"] }
        // ... (–æ—Å—Ç–∞–ª—å–Ω—ã–µ 15 —è–∑—ã–∫–æ–≤ –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
    };

    function translate() {
        const ln = document.getElementById('langSelect').value;
        const d = langMap[ln] || langMap['en'];
        document.getElementById('ui-title').innerText = d.title;
        document.getElementById('lbl-lang').innerText = d.lang;
        document.getElementById('lbl-mode').innerText = d.mode;
        document.getElementById('lbl-code').innerText = d.code;
        document.getElementById('copy-btn').innerText = d.copy;
        document.getElementById('lbl-aud').innerText = d.aud;
        document.getElementById('lbl-img').innerText = d.img;
        document.getElementById('slowBtn').innerText = d.slow;
        document.getElementById('lock-title').innerText = d.lock;
        document.getElementById('dict-title').innerText = d.dict;
        document.getElementById('lbl-dict-input').innerText = d.dictInp;
        Array.from(document.getElementById('modeSelect').options).forEach((opt, i) => { if(d.modes[i]) opt.text = d.modes[i]; });
    }

    // –õ–æ–≥–∏–∫–∞ —Å–ª–æ–≤–∞—Ä—è
    document.getElementById('dictUrl').oninput = (e) => {
        const url = e.target.value.trim();
        const frame = document.getElementById('dict-frame');
        const hint = document.getElementById('dict-hint');
        if(url) {
            frame.src = url;
            frame.style.display = "block";
            hint.style.display = "none";
        } else {
            frame.style.display = "none";
            hint.style.display = "block";
        }
    };

    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤
    document.getElementById('modeSelect').onchange = function() {
        const m = this.value;
        const container = document.getElementById('main-container');
        const dictInput = document.getElementById('dictUrl');
        const dictLbl = document.getElementById('lbl-dict-input');

        // –ü—Ä—è—á–µ–º —Å–ª–æ–≤–∞—Ä—å –≤ —Ä–µ–∂–∏–º–µ —Ç–µ—Å—Ç–∞
        if(m === 'test') {
            container.classList.add('test-mode');
            dictInput.style.display = "none";
            dictLbl.style.display = "none";
        } else {
            container.classList.remove('test-mode');
            dictInput.style.display = "block";
            dictLbl.style.display = "block";
        }

        plays = 0;
        audio.playbackRate = 1;
        document.getElementById('slowBtn').style.display = (m === 'study') ? 'block' : 'none';
        document.getElementById('loopBtn').style.display = (m === 'master') ? 'block' : 'none';
        document.getElementById('prog').style.pointerEvents = (m === 'test') ? 'none' : 'auto';
        document.getElementById('rew-btn').disabled = (m === 'test');
        document.getElementById('fwd-btn').disabled = (m === 'test');
        updateStatus();
    };

    // –û—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ (–∞—É–¥–∏–æ, –∑–∞–≥—Ä—É–∑–∫–∞, –∫–Ω–æ–ø–∫–∏)
    function updateStatus() {
        const ln = document.getElementById('langSelect').value;
        const m = document.getElementById('modeSelect').value;
        const d = langMap[ln] || langMap['en'];
        document.getElementById('status-display').innerText = (m === 'test') ? `${d.attempt}: ${plays + 1} / 2` : "";
    }

    function clearRes(type) {
        if(type === 'aud') { audio.pause(); audio.src = ""; document.getElementById('audUrl').value = ""; document.getElementById('audFile').value = ""; }
        else { document.getElementById('cover-div').style.backgroundImage = "none"; document.getElementById('cover-div').classList.remove('has-img'); document.getElementById('imgUrl').value = ""; document.getElementById('imgFile').value = ""; }
    }

    document.getElementById('audUrl').oninput = (e) => { audio.src = e.target.value.trim(); plays = 0; updateStatus(); };
    document.getElementById('audFile').onchange = (e) => { if(e.target.files[0]) { audio.src = URL.createObjectURL(e.target.files[0]); plays = 0; updateStatus(); } };
    document.getElementById('imgUrl').oninput = (e) => { const c = document.getElementById('cover-div'); c.style.backgroundImage = `url(${e.target.value})`; c.classList.add('has-img'); };
    document.getElementById('imgFile').onchange = (e) => { if(e.target.files[0]) { const c = document.getElementById('cover-div'); c.style.backgroundImage = `url(${URL.createObjectURL(e.target.files[0])})`; c.classList.add('has-img'); } };

    document.getElementById('play-btn').onclick = () => { if(audio.src) audio.paused ? audio.play() : audio.pause(); };
    audio.onplay = () => {
        if(document.getElementById('modeSelect').value === 'test' && audio.currentTime === 0) {
            plays++; updateStatus();
            if(plays > 2) { audio.pause(); document.getElementById('lock-screen').style.display = 'flex'; }
        }
        document.getElementById('play-btn').innerText = '‚è∏';
    };
    audio.onpause = () => document.getElementById('play-btn').innerText = '‚ñ∂';
    audio.ontimeupdate = () => {
        const p = document.getElementById('prog'); p.max = audio.duration || 0; p.value = audio.currentTime;
        const f = s => new Date(s * 1000).toISOString().substr(14, 5);
        document.getElementById('time-txt').innerText = `${f(audio.currentTime)} / ${f(audio.duration || 0)}`;
    };

    document.getElementById('slowBtn').onclick = function() { 
        audio.playbackRate = (audio.playbackRate === 1) ? 0.8 : 1;
        this.style.filter = (audio.playbackRate === 0.8) ? "brightness(1.2)" : "none";
    };

    document.getElementById('langSelect').onchange = translate;
    document.getElementById('copy-btn').onclick = () => {
        const frame = `<iframe src="${window.location.href}" width="100%" height="650" frameborder="0"></iframe>`;
        navigator.clipboard.writeText(frame); alert("Code copied!");
    };

    translate();
</script>
</body>
</html>
