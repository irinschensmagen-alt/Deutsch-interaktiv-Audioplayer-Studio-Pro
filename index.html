<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Audio Studio EDU â€” Professional</title>
<style>
:root {
  --radius: 16px;
  --primary-color: #6c5ce7;
  --secondary-color: #a29bfe;
  --bg-light: #f8f9fa;
  --bg-dark: #2d3436;
  --text-light: #2d3436;
  --text-dark: #dfe6e9;
  --accent-gradient: linear-gradient(135deg, #a29bfe, #6c5ce7);
}
body {
  margin:0;
  font-family: 'Inter', system-ui, sans-serif;
  min-height:100vh;
  display:flex;
  justify-content:center;
  padding:24px;
  background: var(--bg-light);
  color: var(--text-light);
  transition: background 0.3s, color 0.3s;
}
body.dark {
  background: var(--bg-dark);
  color: var(--text-dark);
}
.wrapper {
  display:grid;
  grid-template-columns:320px 420px;
  gap:20px;
}
.panel, .player {
  border-radius: var(--radius);
  padding:16px;
  box-shadow: 0 12px 32px rgba(0,0,0,.1);
  transition: background 0.3s, color 0.3s;
}
.panel {
  background: #ffffffee;
  backdrop-filter: blur(12px);
}
body.dark .panel { background: #2d3436ee; }
.player {
  display:grid;
  gap:12px;
  backdrop-filter: blur(12px);
  background: #ffffffee;
}
body.dark .player { background: #2d3436ee; }
h2 { margin:0 0 12px; font-size:19px; }
label { font-size:12px; opacity:.8; }
input, select, button, textarea { width:100%; margin:6px 0 12px; font-family:inherit; }
button { border:none; border-radius:12px; padding:9px; cursor:pointer; background: var(--accent-gradient); color:#fff; font-weight:500; transition: transform 0.2s; }
button:hover { transform: scale(1.05); }
.cover { height:160px; border-radius:12px; background:#dfe6e9 center/cover; }
.controls { display:grid; grid-template-columns:auto auto auto; gap:12px; justify-content:center; }
.controls button { width:56px; font-size:18px; }
.time { text-align:center; font-size:12px; }
.timeline { width:100%; }
canvas { width:100%; height:70px; border-radius:10px; background:#f0f0f0; }
body.dark canvas { background:#353839; }
.playlist { display:none; font-size:13px; border-top:1px dashed #b2bec3; padding-top:8px; }
.playlist div { padding:6px; border-radius:8px; cursor:pointer; transition: background 0.2s; }
.playlist div:hover { background: #dfe6e9; }
body.dark .playlist div:hover { background: #636e72; }
/* Templates */
.template1 { background: linear-gradient(135deg,#dfe6e9,#b2bec3,#ffeaa7); color:#2d3436; }
.template2 { background: linear-gradient(135deg,#fd79a8,#fab1a0,#ffeaa7); color:#2d3436; }
.template3 { background: linear-gradient(135deg,#74b9ff,#a29bfe,#dfe6e9); color:#2d3436; }
</style>
</head>
<body class="template1">
<div class="wrapper">
<div class="panel">
<h2 id="title">ğŸ› Audio Studio EDU</h2>
<label id="langLabel">ğŸŒ Language</label><select id="lang"></select>
<label id="modeLabel">ğŸ“ Mode</label><select id="mode"><option value="teacher">Teacher</option><option value="student">Student</option><option value="exam">Exam</option></select>
<label id="templateLabel">ğŸ¨ Template</label><select id="template"><option value="template1">Soft Gradient 1</option><option value="template2">Soft Gradient 2</option><option value="template3">Soft Gradient 3</option></select>
<label id="uploadAudioLabel">ğŸµ Upload audio</label><input type="file" id="audioUpload" accept="audio/*" multiple>
<label id="coverLabel">ğŸ–¼ Cover</label><input type="file" id="coverUpload" accept="image/*">
<button id="recordBtn">ğŸ™ Record</button>
<button id="iframeBtn">ğŸ“¦ iframe</button>
<textarea id="iframe"></textarea>
<button id="themeBtn">ğŸŒ— Toggle Theme</button>
</div>
<div class="player">
<div class="cover" id="cover"></div>
<div class="controls">
<button id="back">âª</button>
<button id="play">â–¶</button>
<button id="fwd">â©</button>
</div>
<div class="time" id="time">00:00 / 00:00</div>
<input type="range" id="timeline" class="timeline" min="0" value="0" step="0.01">
<canvas id="viz"></canvas>
<button id="playlistBtn">ğŸ“‚ Playlist</button>
<div class="playlist" id="playlist"></div>
<audio id="audio" preload="metadata"></audio>
</div>
</div>
<script>
/* ---------- Languages ---------- */
const langs={
 ru:{lang:'Ğ ÑƒÑÑĞºĞ¸Ğ¹',mode:'Ğ ĞµĞ¶Ğ¸Ğ¼',upload:'Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ°ÑƒĞ´Ğ¸Ğ¾',cover:'ĞĞ±Ğ»Ğ¾Ğ¶ĞºĞ°',record:'Ğ—Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ',playlist:'ĞŸĞ»ĞµĞ¹Ğ»Ğ¸ÑÑ‚',iframe:'iframe'},
 en:{lang:'English',mode:'Mode',upload:'Upload audio',cover:'Cover',record:'Record',playlist:'Playlist',iframe:'iframe'},
 de:{lang:'Deutsch',mode:'Modus',upload:'Audio hochladen',cover:'Cover',record:'Aufnehmen',playlist:'Playlist',iframe:'iframe'},
 fr:{lang:'FranÃ§ais',mode:'Mode',upload:'TÃ©lÃ©charger audio',cover:'Couverture',record:'Enregistrer',playlist:'Playlist',iframe:'iframe'},
 es:{lang:'EspaÃ±ol',mode:'Modo',upload:'Subir audio',cover:'Portada',record:'Grabar',playlist:'Lista',iframe:'iframe'},
 it:{lang:'Italiano',mode:'ModalitÃ ',upload:'Carica audio',cover:'Copertina',record:'Registra',playlist:'Playlist',iframe:'iframe'},
 zh:{lang:'ä¸­æ–‡',mode:'æ¨¡å¼',upload:'ä¸Šä¼ éŸ³é¢‘',cover:'å°é¢',record:'å½•éŸ³',playlist:'æ’­æ”¾åˆ—è¡¨',iframe:'iframe'},
 ar:{lang:'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',mode:'Ø§Ù„ÙˆØ¶Ø¹',upload:'Ø±ÙØ¹ ØµÙˆØª',cover:'ØºÙ„Ø§Ù',record:'ØªØ³Ø¬ÙŠÙ„',playlist:'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ´ØºÙŠÙ„',iframe:'iframe'},
 hi:{lang:'à¤¹à¤¿à¤¨à¥à¤¦à¥€',mode:'à¤®à¥‹à¤¡',upload:'à¤‘à¤¡à¤¿à¤¯à¥‹ à¤…à¤ªà¤²à¥‹à¤¡',cover:'à¤•à¤µà¤°',record:'à¤°à¤¿à¤•à¥‰à¤°à¥à¤¡',playlist:'à¤ªà¥à¤²à¥‡à¤²à¤¿à¤¸à¥à¤Ÿ',iframe:'iframe'}
};
/* ---------- Persistence ---------- */
const save=(k,v)=>localStorage.setItem(k,v);
const load=k=>localStorage.getItem(k);
/* ---------- Audio Core ---------- */
const audio=document.getElementById('audio');
const playBtn=document.getElementById('play');
const backBtn=document.getElementById('back');
const fwdBtn=document.getElementById('fwd');
const timeline=document.getElementById('timeline');
const timeEl=document.getElementById('time');
const playlistEl=document.getElementById('playlist');
let ctx,source,analyser,mediaRecorder,recordedChunks=[];
function initAudio(){if(ctx)return;ctx=new (window.AudioContext||window.webkitAudioContext)();source=ctx.createMediaElementSource(audio);analyser=ctx.createAnalyser();analyser.fftSize=256;source.connect(analyser);analyser.connect(ctx.destination);visualize();}
playBtn.onclick=()=>{initAudio();audio.paused?audio.play():audio.pause();};
backBtn.onclick=()=>audio.currentTime=Math.max(0,audio.currentTime-5);
fwdBtn.onclick=()=>audio.currentTime=Math.min(audio.duration||0,audio.currentTime+5);
/* ---------- Timeline ---------- */
timeline.oninput=()=>audio.currentTime=timeline.value;
audio.ontimeupdate=()=>{timeline.max=audio.duration||0;timeline.value=audio.currentTime;timeEl.textContent=`${fmt(audio.currentTime)} / ${fmt(audio.duration)}`;}
const fmt=t=>isNaN(t)?'00:00':`${Math.floor(t/60)}:${String(Math.floor(t%60)).padStart(2,'0')}`;
/* ---------- Uploads ---------- */
audioUpload.onchange=e=>{[...e.target.files].forEach(f=>{const url=URL.createObjectURL(f);const d=document.createElement('div');d.textContent=f.name;d.onclick=()=>{audio.src=url;audio.play()};playlistEl.appendChild(d);});};
coverUpload.onchange=e=>cover.style.backgroundImage=`url(${URL.createObjectURL(e.target.files[0])})`;
function togglePlaylist(){playlistEl.style.display=playlistEl.style.display==='block'?'none':'block';}
/* ---------- Visualizer ---------- */
const canvas=document.getElementById('viz'); const c=canvas.getContext('2d');
function visualize(){requestAnimationFrame(visualize);if(!analyser)return;const d=new Uint8Array(analyser.frequencyBinCount);analyser.getByteFrequencyData(d);c.clearRect(0,0,canvas.width,canvas.height);d.forEach((v,i)=>{c.fillStyle='#6c5ce7';c.fillRect(i*3,canvas.height-v/2,2,v/2);});}
/* ---------- Recording ---------- */
const recordBtn=document.getElementById('recordBtn');
recordBtn.onclick=async()=>{
 if(!mediaRecorder || mediaRecorder.state==='inactive'){
  const stream=await navigator.mediaDevices.getUserMedia({audio:true});
  mediaRecorder=new MediaRecorder(stream); recordedChunks=[];
  mediaRecorder.ondataavailable=e=>{if(e.data.size>0)recordedChunks.push(e.data)};
  mediaRecorder.onstop=()=>{const blob=new Blob(recordedChunks,{type:'audio/webm'}); const url=URL.createObjectURL(blob); const d=document.createElement('div'); d.textContent='Your Recording'; d.onclick=()=>{audio.src=url; audio.play()}; playlistEl.appendChild(d);};
  mediaRecorder.start(); recordBtn.textContent='â¹ Stop Recording';
 } else {mediaRecorder.stop(); recordBtn.textContent='ğŸ™ Record';}
};
/* ---------- Modes ---------- */
mode.value=load('mode')||'teacher';
mode.onchange=e=>{save('mode',e.target.value);const ex=e.target.value==='exam';backBtn.style.display=fwdBtn.style.display=ex?'none':'inline-block';timeline.disabled=ex;recordBtn.disabled=ex;updateLabels();};
mode.dispatchEvent(new Event('change'));
/* ---------- Language Setup ---------- */
const langSelect=document.getElementById('lang');
Object.entries(langs).forEach(([k,v])=>{const o=document.createElement('option');o.value=k;o.textContent=v.lang;langSelect.appendChild(o);});
/* ---------- Parse URL Parameters ---------- */
const params=new URLSearchParams(window.location.search);
const urlLang=params.get('lang');
const urlMode=params.get('mode');
const urlTemplate=params.get('template');
langSelect.value=urlLang || load('lang') || navigator.language.slice(0,2) || 'en';
mode.value=urlMode || load('mode') || 'teacher';
mode.dispatchEvent(new Event('change'));
if(urlTemplate && ['template1','template2','template3'].includes(urlTemplate)) document.body.className=urlTemplate;
/* ---------- Labels Update ---------- */
langSelect.onchange=()=>{save('lang',langSelect.value);updateLabels();};
function updateLabels(){const v=langs[langSelect.value]||langs['en']; document.getElementById('langLabel').textContent='ğŸŒ '+v.lang; document.getElementById('modeLabel').textContent='ğŸ“ '+v.mode; document.getElementById('uploadAudioLabel').textContent='ğŸµ '+v.upload; document.getElementById('coverLabel').textContent='ğŸ–¼ '+v.cover; recordBtn.textContent='ğŸ™ '+v.record; playlistBtn.textContent='ğŸ“‚ '+v.playlist; iframeBtn.textContent='ğŸ“¦ '+v.iframe;}
updateLabels();
/* ---------- Templates ---------- */
const templateSel=document.getElementById('template');
templateSel.onchange=e=>{document.body.className=e.target.value;};
/* ---------- Iframe ---------- */
iframeBtn.onclick=()=>{iframe.value=`<iframe src="${location.href}" width="420" height="580" frameborder="0"></iframe>`}
/* ---------- Theme Toggle ---------- */
const themeBtn=document.getElementById('themeBtn');
themeBtn.onclick=()=>{document.body.classList.toggle('dark');};
</script>
</body>
</html>
